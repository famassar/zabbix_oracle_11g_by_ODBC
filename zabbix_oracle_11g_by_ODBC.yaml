zabbix_export:
  version: '7.0'
  template_groups:
    - uuid: 748ad4d098d447d492bb935c907f652f
      name: Templates/Databases
  templates:
    - uuid: c0153e1749004aa1a67f6372aa7a722d
      template: 'Oracle 11g by ODBC'
      name: 'Oracle 11g by ODBC'
      description: |
        1. Create an Oracle user for monitoring.
        
        2. Set the hostname or IP address of the Oracle DB instance, user name and password in host macros ({$ORACLE.HOST}, {$ORACLE.USER} and {$ORACLE.PASSWORD}).
          Do not forget to install the Microsoft ODBC driver on the Zabbix server or the Zabbix proxy.
          See Oracle documentation for instructions: https://www.oracle.com/database/technologies/releasenote-odbc-ic.html.
        
          Note! Credentials in the odbc.ini do not work for Oracle.
          Note! Be sure that ODBC connects to Oracle with session parameter NLS_NUMERIC_CHARACTERS= '.,' It is important for correct display float numbers in Zabbix.
        The "Service's TCP port state" item uses {$ORACLE.HOST} and {$ORACLE.PORT} macros to check the availability of the listener.
        
        Generated by official Zabbix template tool "Templator"
      groups:
        - name: Templates/Databases
      items:
        - uuid: 8e5d077472e540c48cf5c7c098266f19
          name: 'Get archive log'
          type: ODBC
          key: 'db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          delay: 1h
          history: '0'
          value_type: TEXT
          trends: '0'
          params: |
            SELECT d.dest_name
            FROM v$archive_dest d , v$database db WHERE d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets the destinations of the log archive.'
          tags:
            - tag: component
              value: raw
        - uuid: 2bb61bd524dd41a589eaef1be10fc4ec
          name: 'Get ASM disk groups'
          type: ODBC
          key: 'db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          delay: 1h
          history: '0'
          value_type: TEXT
          trends: '0'
          params: 'SELECT name AS dgname FROM v$asm_diskgroup;'
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets the ASM disk groups.'
          tags:
            - tag: component
              value: raw
        - uuid: bb917bc51d364139bb433eb96c33db96
          name: 'Get database'
          type: ODBC
          key: 'db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          delay: 1h
          history: '0'
          value_type: TEXT
          trends: '0'
          params: 'SELECT name as DBNAME FROM V$DATABASE;'
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets the databases in the database management system (DBMS).'
          tags:
            - tag: component
              value: raw
        - uuid: 3ae49a08abdc410abd2979c31f54ef79
          name: 'Get instance state'
          type: ODBC
          key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          history: '0'
          value_type: TEXT
          trends: '0'
          params: |
            SELECT
            INSTANCE_NAME,
            HOST_NAME,
            VERSION AS VERSION,
            floor((SYSDATE - startup_time)*60*60*24) AS UPTIME,
            decode(status,'STARTED',1,'MOUNTED',2,'OPEN',3,'OPEN MIGRATE',4, 0) AS STATUS,
            decode(archiver,'STOPPED',1,'STARTED',2,'FAILED',3, 0) AS  ARCHIVER,
            decode(instance_role,'PRIMARY_INSTANCE',1,'SECONDARY_INSTANCE',2, 0) AS  INSTANCE_ROLE
            FROM v$instance;
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets the state of the current instance.'
          tags:
            - tag: component
              value: raw
        - uuid: 764f72a9e00f442e939a365c28703585
          name: 'Get system metrics'
          type: ODBC
          key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          delay: 0;m0-59
          history: '0'
          value_type: TEXT
          trends: '0'
          params: |
            SELECT 'SYS::' || METRIC_NAME AS METRIC, ROUND(VALUE,3) as VALUE
             FROM V$SYSMETRIC WHERE GROUP_ID = 2
            UNION
              SELECT 'SYSPARAM::' || INITCAP(NAME) AS METRIC, to_number(VALUE)
              FROM V$SYSTEM_PARAMETER WHERE NAME IN ('sessions', 'processes', 'db_files')
            UNION
             SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
            UNION
            SELECT 'SESSION::Lock rate' ,(cnt_block / cnt_all)* 100 pct
            FROM ( SELECT COUNT(*) cnt_block FROM v$session WHERE blocking_session IS NOT NULL), ( SELECT COUNT(*) cnt_all FROM v$session)
            UNION
              SELECT 'SESSION::Long time locked' ,count(*) FROM V$SESSION s WHERE s.BLOCKING_SESSION IS NOT NULL AND s.BLOCKING_SESSION_STATUS='VALID' AND s.SECONDS_IN_WAIT > {$ORACLE.SESSION.LOCK.MAX.TIME}
            UNION
             SELECT 'SESSION::Total', COUNT(*) AS VALUE FROM V$SESSION
            UNION
            SELECT 'SESSION::Concurrency rate', NVL(ROUND(SUM(duty_act.cnt*100 / num_cores.val)), 0)
            FROM
            ( SELECT DECODE(session_state, 'ON CPU', 'CPU', wait_class) wait_class, ROUND(COUNT(*)/(60 * 15), 1) cnt
            FROM v$active_session_history sh
            WHERE sh.sample_time >= SYSDATE - 15 / 1440 AND DECODE(session_state, 'ON CPU', 'CPU', wait_class) IN('Concurrency')
            GROUP BY DECODE(session_state, 'ON CPU', 'CPU', wait_class)) duty_act,
            ( SELECT SUM(value) val FROM v$osstat WHERE stat_name = 'NUM_CPU_CORES') num_cores
            UNION
             SELECT 'PGA::' || INITCAP(NAME), VALUE FROM V$PGASTAT
            UNION
             SELECT 'FRA::Space Limit' AS METRIC, space_limit AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Space Used', space_used AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Space Reclaimable', space_reclaimable AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Number Of Files', number_of_files AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Usable Pct', DECODE(space_limit, 0, 0,(100-(100 *(space_used-space_reclaimable)/ space_limit))) AS VALUE FROM V$RECOVERY_FILE_DEST
            UNION
             SELECT 'FRA::Restore Point', COUNT(*) AS VALUE FROM V$RESTORE_POINT
            UNION
             SELECT 'PROC::Procnum', COUNT(*) FROM v$process
            UNION
             SELECT 'DATAFILE::Count', COUNT(*) FROM v$datafile
            UNION
             SELECT 'SGA::' || INITCAP(pool), SUM(bytes) FROM V$SGASTAT
             WHERE pool IN ( 'java pool', 'large pool' ) GROUP BY pool
            UNION
             SELECT 'SGA::Shared Pool', SUM(bytes) FROM V$SGASTAT
             WHERE pool = 'shared pool' AND name NOT IN ('library cache', 'dictionary cache', 'free memory', 'sql area')
            UNION
             SELECT 'SGA::' || INITCAP(name), bytes FROM V$SGASTAT
             WHERE pool IS NULL AND name IN ('log_buffer', 'fixed_sga')
            UNION
             SELECT 'SGA::Buffer_Cache', SUM(bytes) FROM V$SGASTAT
             WHERE pool IS NULL AND name IN ('buffer_cache', 'db_block_buffers')
            UNION
             SELECT 'REDO::Available', count(*) from v$log t where t.status in ('INACTIVE', 'UNUSED')
            UNION
             SELECT 'USER::Expire password', ROUND(DECODE(SIGN(NVL(u.expiry_date, SYSDATE + 999) - SYSDATE),-1, 0, NVL(u.expiry_date, SYSDATE + 999) - SYSDATE)) exp_passwd_days_before
            FROM dba_users u WHERE username = UPPER('{$ORACLE.USER}');
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets the values of the system metrics.'
          tags:
            - tag: component
              value: raw
        - uuid: 269e2ec753a8442183a4544943233f53
          name: 'Get tablespace'
          type: ODBC
          key: 'db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          delay: 1h
          history: '0'
          value_type: TEXT
          trends: '0'
          params: |
            SELECT
            	1 AS CON_ID,             -- Valore statico per compatibilit√† Zabbix
            	'DB' AS CON_NAME,         -- Nome statico per il container (non esiste in 11g)
            	TABLESPACE_NAME AS TABLESPACE,
            	CONTENTS
            FROM
            	DBA_TABLESPACES
          username: '{$ORACLE.USER}'
          password: '{$ORACLE.PASSWORD}'
          description: 'Gets tablespaces in DBMS.'
          tags:
            - tag: component
              value: raw
        - uuid: fb8adb4c3de2487bb4f59e467c665d67
          name: 'Service''s TCP port state'
          key: 'net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}]'
          delay: 30s
          description: 'Checks the availability of Oracle on the TCP port.'
          valuemap:
            name: 'Service state'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: health
            - tag: component
              value: network
        - uuid: a8f6ae6115164bceb0b8c00d33414058
          name: 'Active parallel sessions'
          type: DEPENDENT
          key: oracle.active_parallel_sessions
          delay: '0'
          value_type: FLOAT
          description: 'The number of active parallel sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Active Parallel Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: ae4a1428c86a4542a622e345d1e00039
          name: 'Active serial sessions'
          type: DEPENDENT
          key: oracle.active_serial_sessions
          delay: '0'
          value_type: FLOAT
          description: 'The number of active serial sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Active Serial Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: 22f1048632e040378d7dd5ed8690d244
          name: 'Average active sessions'
          type: DEPENDENT
          key: oracle.active_sessions
          delay: '0'
          value_type: FLOAT
          description: 'The average number of active sessions at a point in time that are either working or waiting.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Average Active Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: 7315e1789ba84ca597a206c98aba6f07
          name: 'Archiver state'
          type: DEPENDENT
          key: oracle.archiver_state
          delay: '0'
          description: 'The status of automatic archiving.'
          valuemap:
            name: 'Oracle archiver state'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..ARCHIVER.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 44a7c069c6ef4d099427a50895464567
          name: 'Buffer cache hit ratio'
          type: DEPENDENT
          key: oracle.buffer_cache_hit_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The ratio of buffer cache hits ((LogRead - PhyRead)/LogRead).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Buffer Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: ea1b7659c583407bbc41d113a8572e05
          name: 'Global cache blocks corrupted'
          type: DEPENDENT
          key: oracle.cache_blocks_corrupt
          delay: '0'
          units: Rps
          description: 'The number of blocks that encountered corruption or checksum failure during the interconnect.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Global Cache Blocks Corrupted'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: 1fddf89eaf57480b82ff1680a9cce73b
          name: 'Global cache blocks lost'
          type: DEPENDENT
          key: oracle.cache_blocks_lost
          delay: '0'
          units: Rps
          description: 'The number of lost global cache blocks.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Global Cache Blocks Lost'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: 508c352809f74744a4c0c8e46b980933
          name: 'Cursor cache hit ratio'
          type: DEPENDENT
          key: oracle.cursor_cache_hit_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The ratio of cursor cache hits (CursorCacheHit/SoftParse).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Cursor Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: b1ea41654d944aeaa627fd60102836b5
          name: 'Database CPU time ratio'
          type: DEPENDENT
          key: oracle.database_cpu_time_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The ratio calculated by dividing the total CPU (used by the database) by the Oracle time model statistic DB time.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Database CPU Time Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cpu
        - uuid: 5f8299f7609d4bf3ab34302dd7828489
          name: 'Database wait time ratio'
          type: DEPENDENT
          key: oracle.database_wait_time_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'Wait time - the time that the server process spends waiting for available shared resources to be released by other server processes such as latches, locks, data buffers, etc.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Database Wait Time Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 2d9969a4c0c74151a3ecb4e426f0990c
          name: 'Datafiles count'
          type: DEPENDENT
          key: oracle.db_files_count
          delay: '0'
          description: 'The current number of datafiles.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''DATAFILE::Count'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: datafiles
        - uuid: 268b11f5cfd24cf2b5bfa025c9ea7000
          name: 'Datafiles limit'
          type: DEPENDENT
          key: oracle.db_files_limit
          delay: '0'
          description: 'The maximum allowable number of datafiles.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Db_Files'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: datafiles
        - uuid: 88ced45226364705ab8d673051e94ceb
          name: 'Disk sort per second'
          type: DEPENDENT
          key: oracle.disk_sorts
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'The number of sorts going to disk per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Disk Sort Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 641284d126a8422bb9ef83fe556e37dc
          name: 'Enqueue timeouts per second'
          type: DEPENDENT
          key: oracle.enqueue_timeouts_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'Enqueue timeouts per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Enqueue Timeouts Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: d313989527ae49b084d4a03d677a5e38
          name: 'FRA, Number of files'
          type: DEPENDENT
          key: oracle.fra_number_of_files
          delay: '0'
          description: 'The number of files in the FRA.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Number Of Files'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: 2c4da7086af7480f92427ee78b1c63be
          name: 'FRA, Number of restore points'
          type: DEPENDENT
          key: oracle.fra_restore_point
          delay: '0'
          value_type: FLOAT
          description: 'Number of restore points in the FRA.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Restore Point'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: 29ff9fa73d2843e5af7cce3a7cfe91ee
          name: 'FRA, Space limit'
          type: DEPENDENT
          key: oracle.fra_space_limit
          delay: '0'
          units: B
          description: 'The maximum amount of disk space (in bytes) that the database can use for the Fast Recovery Area (FRA).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Limit'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: 02517ada360d48338369a6674b8db483
          name: 'FRA, Space reclaimable'
          type: DEPENDENT
          key: oracle.fra_space_reclaimable
          delay: '0'
          units: B
          description: 'The total amount of disk space (in bytes) that can be created by deleting obsolete, redundant, and other low-priority files from the FRA.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Reclaimable'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: 643ef04fafd442fc8566131ac0dd18af
          name: 'FRA, Used space'
          type: DEPENDENT
          key: oracle.fra_space_used
          delay: '0'
          units: B
          description: 'The amount of disk space (in bytes) used by FRA files created in the current and all the previous FRAs.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Space Used'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: f28392e083a24bef8e155318f66de612
          name: 'FRA, Usable space in %'
          type: DEPENDENT
          key: oracle.fra_usable_pct
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'Percentage of space usable in the FRA.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''FRA::Usable Pct'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: fra
        - uuid: 7543202703e345a1a9ad535769ce8a43
          name: 'GC CR block received per second'
          type: DEPENDENT
          key: oracle.gc_cr_block_received_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'The global cache (GC) and the consistent read (CR) block received per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::GC CR Block Received Per Second'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: 44f03e1ed7d345788b0d8211c21ea0f1
          name: 'Instance role'
          type: DEPENDENT
          key: oracle.instance.role
          delay: '0'
          description: 'Indicates whether the instance is an active instance or an inactive secondary instance.'
          valuemap:
            name: 'Oracle instance role'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..INSTANCE_ROLE.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: ed77c82162814a049a06270dbca2fdf3
          name: 'Instance hostname'
          type: DEPENDENT
          key: oracle.instance_hostname
          delay: '0'
          value_type: CHAR
          trends: '0'
          description: 'The name of the host machine.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..HOST_NAME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: a89b66e66c374b34b017bdc54a750884
              expression: 'last(/Oracle 11g by ODBC/oracle.instance_hostname,#1)<>last(/Oracle 11g by ODBC/oracle.instance_hostname,#2) and length(last(/Oracle 11g by ODBC/oracle.instance_hostname))>0'
              name: 'Oracle: Instance hostname has changed'
              event_name: 'Oracle: Instance hostname has changed (new hostname received: {ITEM.VALUE})'
              priority: INFO
              description: 'An Oracle Database instance hostname has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 32bca8589a264411b5e3d2124c454270
          name: 'Instance name'
          type: DEPENDENT
          key: oracle.instance_name
          delay: '0'
          value_type: CHAR
          trends: '0'
          description: 'The name of the instance.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..INSTANCE_NAME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: 751ee9b4b83b4fad9fd68d7c084486a2
              expression: 'last(/Oracle 11g by ODBC/oracle.instance_name,#1)<>last(/Oracle 11g by ODBC/oracle.instance_name,#2) and length(last(/Oracle 11g by ODBC/oracle.instance_name))>0'
              name: 'Oracle: Instance name has changed'
              event_name: 'Oracle: Instance name has changed (new name received: {ITEM.VALUE})'
              priority: INFO
              description: 'An Oracle Database instance name has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 52921e137bee413a8e5798ba0d9de442
          name: 'Instance status'
          type: DEPENDENT
          key: oracle.instance_status
          delay: '0'
          description: 'The status of the instance.'
          valuemap:
            name: 'Oracle instance status'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..STATUS.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: b7f55a9fee8d4830b4ec03119efc7062
          name: 'Library cache hit ratio'
          type: DEPENDENT
          key: oracle.library_cache_hit_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The ratio of library cache hits (Hits/Pins).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Library Cache Hit Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
        - uuid: 004146f0e1584b3faba6fb9005a6deda
          name: 'Logons per second'
          type: DEPENDENT
          key: oracle.logons_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'The number of logon attempts.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Logons Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: fefacb622f3241f084957b0e0e5af1af
          name: 'Long table scans per second'
          type: DEPENDENT
          key: oracle.long_table_scans_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'The number of long table scans per second. A table is considered long if it is not cached and if its high water mark is greater than five blocks.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Long Table Scans Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 9825906b10574646bf1fede39bb0edea
          name: 'Memory sorts ratio'
          type: DEPENDENT
          key: oracle.memory_sorts_ratio
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The percentage of sorts (from `ORDER BY` clauses or index building) that are done to disk vs. in-memory.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Memory Sorts Ratio'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: e6c2705bfb9f4f9cb4f92bb02a56eba3
          name: 'PGA, Global memory bound'
          type: DEPENDENT
          key: oracle.pga_global_bound
          delay: '0'
          units: B
          description: 'The maximum size of a work area executed in automatic mode.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Global Memory Bound'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: pga
        - uuid: 8f1e3e9f79944256b43a5c01399b4466
          name: 'PGA, Aggregate target parameter'
          type: DEPENDENT
          key: oracle.pga_target
          delay: '0'
          units: B
          description: 'The current value of the `PGA_AGGREGATE_TARGET` initialization parameter. If this parameter is not set, then its value is "0" and automatic management of the PGA memory is disabled.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Aggregate Pga Target Parameter'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: pga
        - uuid: 4eec03b88071426992cdd3c0c818fb58
          name: 'Physical reads per second'
          type: DEPENDENT
          key: oracle.physical_reads_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'Reads per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Reads Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: disk
        - uuid: 6db799262bc34369b29b16cd0d2c6ecc
          name: 'Physical reads bytes per second'
          type: DEPENDENT
          key: oracle.physical_read_bytes_rate
          delay: '0'
          value_type: FLOAT
          units: Bps
          description: 'Read bytes per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Read Bytes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: disk
        - uuid: 3ac614ce4eed4ae8b6bba53a387ddd2b
          name: 'Physical writes per second'
          type: DEPENDENT
          key: oracle.physical_writes_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'Writes per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Writes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: disk
        - uuid: e167eb29fe04417eb533e401465c1617
          name: 'Physical writes bytes per second'
          type: DEPENDENT
          key: oracle.physical_write_bytes_rate
          delay: '0'
          value_type: FLOAT
          units: Bps
          description: 'Write bytes per second.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Physical Write Bytes Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: disk
        - uuid: c9d371318de64d369b3ff4f852541880
          name: 'Number of processes'
          type: DEPENDENT
          key: oracle.processes_count
          delay: '0'
          description: 'The current number of user processes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PROC::Procnum'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: system
        - uuid: 8cd52c199a9746529f7b8919227c1204
          name: 'Processes limit'
          type: DEPENDENT
          key: oracle.processes_limit
          delay: '0'
          description: 'The maximum number of user processes.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Processes'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: system
        - uuid: e73d7de0f3ee457f86c4e04ccbf90fd5
          name: 'Redo logs available to switch'
          type: DEPENDENT
          key: oracle.redo_logs_available
          delay: '0'
          description: 'The number of inactive/unused redo logs available for log switching.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''REDO::Available'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: f6c0d43714a749f8b8495fb70b0ee8f9
              expression: 'max(/Oracle 11g by ODBC/oracle.redo_logs_available,5m) < {$ORACLE.REDO.MIN.WARN}'
              name: 'Oracle: Number of REDO logs available for switching is too low'
              event_name: 'Oracle: Number of REDO logs available for switching is too low (less {$ORACLE.REDO.MIN.WARN} for 5 min)'
              priority: WARNING
              description: 'The number of inactive/unused redos available for log switching is low (risk of database downtime).'
              tags:
                - tag: scope
                  value: capacity
        - uuid: a906609220e64f45b0db21f4c71c72ad
          name: 'Rows per sort'
          type: DEPENDENT
          key: oracle.rows_per_sort
          delay: '0'
          value_type: FLOAT
          description: 'The average number of rows per sort for all types of sorts performed.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Rows Per Sort'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 12968b83c83f406dac019f843ee9109e
          name: 'SQL service response time'
          type: DEPENDENT
          key: oracle.service_response_time
          delay: '0'
          value_type: FLOAT
          units: s
          description: 'The Structured Query Language (SQL) service response time expressed in seconds.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::SQL Service Response Time'')].VALUE.first()'
            - type: MULTIPLIER
              parameters:
                - '0.01'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: cb549310382343a7903c38efb3b70134
          name: 'Active background sessions'
          type: DEPENDENT
          key: oracle.session_active_background
          delay: '0'
          value_type: FLOAT
          description: 'The number of active background sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Active Background'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: c5ef94ac64234ef1aad58fc1a85defbe
          name: 'Active user sessions'
          type: DEPENDENT
          key: oracle.session_active_user
          delay: '0'
          value_type: FLOAT
          description: 'The number of active user sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Active User'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: 642adbff2a754a6cb9261da74b3084e0
          name: 'Sessions concurrency'
          type: DEPENDENT
          key: oracle.session_concurrency_rate
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The percentage of concurrency. Concurrency is a database behavior when different transactions request to change the same resource. In the case of modifying data transactions, it sequentially temporarily blocks the right to change the data, and the rest of the transactions wait for access. When the access to a resource is locked for a long time, the concurrency grows (like the transaction queue), often leaving an extremely negative impact on performance. A high contention value does not indicate the root cause of the problem, but is a signal to search for it.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Concurrency rate'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
          triggers:
            - uuid: 6c5a454adf07482298d83b40fc337f7f
              expression: 'min(/Oracle 11g by ODBC/oracle.session_concurrency_rate,5m) > {$ORACLE.CONCURRENCY.MAX.WARN}'
              name: 'Oracle: Too high database concurrency'
              event_name: 'Oracle: Too high database concurrency (over {$ORACLE.CONCURRENCY.MAX.WARN}% for 5 min)'
              priority: WARNING
              description: 'The concurrency rate exceeds `{$ORACLE.CONCURRENCY.MAX.WARN}`%. A high contention value does not indicate the root cause of the problem, but is a signal to review resource consumption (determine the "heaviest" queries in the database, trace sessions, etc.) This will help find the root cause and possible optimization points both in database configuration and the logic of building queries.'
              tags:
                - tag: scope
                  value: performance
        - uuid: f7b3e17bd0c04c1cbe0372765a70c3bc
          name: 'Session count'
          type: DEPENDENT
          key: oracle.session_count
          delay: '0'
          value_type: FLOAT
          description: 'The session count.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Total'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: 9990e5db23564421841ffeebfd9c8577
          name: 'Inactive user sessions'
          type: DEPENDENT
          key: oracle.session_inactive_user
          delay: '0'
          value_type: FLOAT
          description: 'The number of inactive user sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Inactive User'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: 18ee1d071b3c41d9b4aaaaa7d4bf3f5f
          name: 'Sessions limit'
          type: DEPENDENT
          key: oracle.session_limit
          delay: '0'
          description: 'The user and system sessions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYSPARAM::Sessions'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
        - uuid: b14d7ea1ddc24b25a32e74c16a271331
          name: 'Sessions lock rate'
          type: DEPENDENT
          key: oracle.session_lock_rate
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'The percentage of locked sessions. Locks are mechanisms that prevent destructive interaction between transactions accessing the same resource - either user objects, such as tables and rows or system objects not visible to users, such as shared data structures in memory and data dictionary rows.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Lock rate'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
          triggers:
            - uuid: 4a96db34efef4526bcf3a6cce6a87558
              expression: 'min(/Oracle 11g by ODBC/oracle.session_lock_rate,5m) > {$ORACLE.SESSIONS.LOCK.MAX.WARN}'
              name: 'Oracle: Too many locked sessions'
              event_name: 'Oracle: Too many locked sessions (over {$ORACLE.SESSIONS.LOCK.MAX.WARN}% for 5 min)'
              priority: WARNING
              description: 'The number of locked sessions exceeds `{$ORACLE.SESSIONS.LOCK.MAX.WARN}`% of the running sessions.'
              tags:
                - tag: scope
                  value: performance
        - uuid: dd4e7fddc2224e69a8afe1f9b2c01cba
          name: 'Sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s'
          type: DEPENDENT
          key: oracle.session_long_time_locked
          delay: '0'
          value_type: FLOAT
          description: 'The count of the prolongedly locked sessions. (You can change the duration of the maximum session lock in seconds for a query using the `{$ORACLE.SESSION.LOCK.MAX.TIME}` macro. Default = 600 s).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SESSION::Long time locked'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: sessions
          triggers:
            - uuid: f753a1723f144875b160faafbbadb92e
              expression: 'min(/Oracle 11g by ODBC/oracle.session_long_time_locked,5m) > {$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
              name: 'Oracle: Too many sessions locked'
              event_name: 'Oracle: Too many sessions locked over {$ORACLE.SESSION.LOCK.MAX.TIME}s (over {$ORACLE.SESSION.LONG.LOCK.MAX.WARN} for 5 min)'
              priority: WARNING
              description: 'The number of locked sessions exceeding `{$ORACLE.SESSION.LOCK.MAX.TIME}` seconds is too high. Long-term locks can negatively affect the database performance. Therefore, if they are detected, you should first find the most difficult queries from the database point of view and then analyze possible resource leaks.'
              tags:
                - tag: scope
                  value: performance
        - uuid: 8f89b09349854af9a12997a4ec1bed39
          name: 'SGA, buffer cache'
          type: DEPENDENT
          key: oracle.sga_buffer_cache
          delay: '0'
          units: B
          description: 'The size of standard block cache.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Buffer_Cache'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: cache
            - tag: component
              value: sga
        - uuid: f88aa2f653ef48d1a5dfafa03a1f4934
          name: 'SGA, fixed'
          type: DEPENDENT
          key: oracle.sga_fixed
          delay: '0'
          units: B
          description: 'The fixed System Global Area (SGA) is an internal housekeeping area.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Fixed_Sga'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: sga
        - uuid: c4056430ff384c13b70668b001aae7fc
          name: 'SGA, java pool'
          type: DEPENDENT
          key: oracle.sga_java_pool
          delay: '0'
          units: B
          description: 'The memory is allocated from the Java pool.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Java Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: sga
        - uuid: 4bd752dc217c4a87b0449246894f8d1f
          name: 'SGA, large pool'
          type: DEPENDENT
          key: oracle.sga_large_pool
          delay: '0'
          units: B
          description: 'The memory is allocated from a large pool.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Large Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: sga
        - uuid: 84bc77e4c59c4e41b77f9974dbc19c72
          name: 'SGA, log buffer'
          type: DEPENDENT
          key: oracle.sga_log_buffer
          delay: '0'
          units: B
          description: 'The number of bytes allocated for the redo log buffer.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Log_Buffer'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: sga
        - uuid: 6ac7ca8ac18746e0a9ff25bb4511c80a
          name: 'SGA, shared pool'
          type: DEPENDENT
          key: oracle.sga_shared_pool
          delay: '0'
          units: B
          description: 'The memory is allocated from a shared pool.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SGA::Shared Pool'')].VALUE.first()'
              error_handler: CUSTOM_VALUE
              error_handler_params: '0'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: sga
        - uuid: 62a93dfa14524f3693e2bc7224d308bf
          name: 'Shared pool free %'
          type: DEPENDENT
          key: oracle.shared_pool_free
          delay: '0'
          value_type: FLOAT
          units: '%'
          description: 'Free memory of a shared pool expressed in %.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Shared Pool Free %'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
          triggers:
            - uuid: b7826e7fe4f146a8918c17640293f476
              expression: 'max(/Oracle 11g by ODBC/oracle.shared_pool_free,5m)<{$ORACLE.SHARED.FREE.MIN.WARN}'
              name: 'Oracle: Shared pool free is too low'
              event_name: 'Oracle: Shared pool free is too low (less {$ORACLE.SHARED.FREE.MIN.WARN}% for 5m)'
              priority: WARNING
              description: 'The free memory percent of the shared pool has been less than `{$ORACLE.SHARED.FREE.MIN.WARN}`% for the last 5 minutes.'
              tags:
                - tag: scope
                  value: capacity
        - uuid: 29edcf89df454f21bc2a4ff189a10ddb
          name: 'Total sorts per user call'
          type: DEPENDENT
          key: oracle.sorts_per_user_call
          delay: '0'
          value_type: FLOAT
          description: 'The total sorts per user call.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Total Sorts Per User Call'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 778fa1f087d94293ad89006a17b917f3
          name: 'Temp space used'
          type: DEPENDENT
          key: oracle.temp_space_used
          delay: '0'
          value_type: FLOAT
          units: B
          description: 'Used temporary space.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::Temp Space Used'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 4f71c6794702422fadff96770418ed68
          name: 'PGA, Total allocated'
          type: DEPENDENT
          key: oracle.total_pga_allocated
          delay: '0'
          units: B
          description: 'The current amount of the PGA memory allocated by the instance. The Oracle Database attempts to keep this number below the value of the `PGA_AGGREGATE_TARGET` initialization parameter. However, it is possible for the PGA allocated to exceed that value by a small percentage and for a short period of time when the work area workload is increasing very rapidly or when `PGA_AGGREGATE_TARGET` is set to a small value.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Pga Allocated'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: pga
        - uuid: 98785c3148e044018a26e7046c4d4e2d
          name: 'PGA, Total freeable'
          type: DEPENDENT
          key: oracle.total_pga_freeable
          delay: '0'
          units: B
          description: 'The number of bytes of the PGA memory in all processes that could be freed back to the OS.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Freeable Pga Memory'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: pga
        - uuid: 6d1eabb14c6643b6accb30d5828b268d
          name: 'PGA, Total inuse'
          type: DEPENDENT
          key: oracle.total_pga_used
          delay: '0'
          units: B
          description: 'The amount of Program Global Area (PGA) memory currently consumed by work areas. This number can be used to determine how much memory is consumed by other consumers of the PGA memory (for example, PL/SQL or Java).'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''PGA::Total Pga Inuse'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: memory
            - tag: component
              value: pga
        - uuid: e0f82f1ed3f64d99a938ccfa074b32dc
          name: Uptime
          type: DEPENDENT
          key: oracle.uptime
          delay: '0'
          trends: '0'
          units: s
          description: 'The Oracle instance uptime expressed in seconds.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..UPTIME.first()
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: 05e8ae3eb02344a3ba7e003b39d2c304
              expression: 'nodata(/Oracle 11g by ODBC/oracle.uptime,5m)=1'
              name: 'Oracle: Failed to fetch info data'
              event_name: 'Oracle: Failed to fetch info data (or no data for 5m)'
              priority: WARNING
              description: 'Zabbix has not received any data for the items for the last 5 minutes. The database might be unavailable for connecting.'
              dependencies:
                - name: 'Oracle: Port {$ORACLE.PORT} is unavailable'
                  expression: 'max(/Oracle 11g by ODBC/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and max(/Oracle 11g by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)>0'
              tags:
                - tag: scope
                  value: availability
            - uuid: 822964ac09c34e2787ba30509dc1e3ba
              expression: 'last(/Oracle 11g by ODBC/oracle.uptime)<10m'
              name: 'Oracle: Host has been restarted'
              event_name: 'Oracle: {HOST.NAME} has been restarted (uptime < 10m)'
              priority: INFO
              description: 'Uptime is less than 10 minutes.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: 0132c86d0a5b44adb1583ba9ecdbfe26
          name: 'User ''{$ORACLE.USER}'' expire password'
          type: DEPENDENT
          key: oracle.user_expire_password
          delay: '0'
          value_type: FLOAT
          units: days
          description: 'The number of days before the Zabbix account password expires.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''USER::Expire password'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: 69ad8282a6604cfd87e1eb46655904ee
              expression: 'last(/Oracle 11g by ODBC/oracle.user_expire_password)  < {$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
              name: 'Oracle: Zabbix account will expire soon'
              event_name: 'Oracle: Zabbix account will expire soon (under {$ORACLE.EXPIRE.PASSWORD.MIN.WARN} days)'
              priority: WARNING
              description: 'The password for the Zabbix user in the database expires soon.'
              tags:
                - tag: scope
                  value: notice
        - uuid: fa4f11c4f3c64bccbca392a600817597
          name: 'User rollbacks per second'
          type: DEPENDENT
          key: oracle.user_rollbacks_rate
          delay: '0'
          value_type: FLOAT
          units: Rps
          description: 'The number of times that users manually issued the `ROLLBACK` statement or an error occurred during the users'' transactions.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.METRIC==''SYS::User Rollbacks Per Sec'')].VALUE.first()'
          master_item:
            key: 'db.odbc.get[get_system_metrics,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
        - uuid: 8e5fe9f53a70419782c1a8e89b441c8a
          name: Version
          type: DEPENDENT
          key: oracle.version
          delay: '0'
          value_type: CHAR
          trends: '0'
          description: 'The Oracle Server version.'
          preprocessing:
            - type: JSONPATH
              parameters:
                - $..VERSION.first()
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 1d
          master_item:
            key: 'db.odbc.get[get_instance_state,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: 0884925356654270ad73b5fab3db5877
              expression: 'last(/Oracle 11g by ODBC/oracle.version,#1)<>last(/Oracle 11g by ODBC/oracle.version,#2) and length(last(/Oracle 11g by ODBC/oracle.version))>0'
              name: 'Oracle: Version has changed'
              event_name: 'Oracle: Version has changed (new version value received: {ITEM.VALUE})'
              priority: INFO
              description: 'The Oracle Database version has changed. Acknowledge to close the problem manually.'
              manual_close: 'YES'
              tags:
                - tag: scope
                  value: notice
        - uuid: dc78d5af6c8c47288d7af823ac8f23e6
          name: 'Number of LISTENER processes'
          key: 'proc.num[,,,"tnslsnr LISTENER"]'
          delay: 30s
          description: 'The number of running listener processes.'
          preprocessing:
            - type: DISCARD_UNCHANGED_HEARTBEAT
              parameters:
                - 10m
          tags:
            - tag: component
              value: application
          triggers:
            - uuid: fd0fb7a49c8740a284f4b687a93e611d
              expression: 'max(/Oracle 11g by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)=0'
              name: 'Oracle: LISTENER process is not running'
              priority: DISASTER
              description: 'The Oracle listener process is not running.'
              tags:
                - tag: scope
                  value: availability
      discovery_rules:
        - uuid: 934d80e1f1a6471ca5b927c3e233b49c
          name: 'Archive log discovery'
          type: DEPENDENT
          key: oracle.archivelog.discovery
          delay: '0'
          description: 'Used for the discovery of the log archive.'
          item_prototypes:
            - uuid: e6f728e2104d44a89d2d2974e607bf46
              name: 'Archivelog ''{#DEST_NAME}'': Get archive log info'
              type: ODBC
              key: 'db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              delay: 5m
              history: '0'
              value_type: TEXT
              trends: '0'
              params: |
                SELECT
                d.dest_name, DECODE (d.status, 'VALID',3, 'DEFERRED', 2, 'ERROR', 1, 0) AS status,
                d.log_sequence,
                d.error
                FROM v$archive_dest d , v$database db
                WHERE d.dest_name = '{#DEST_NAME}' AND d.status != 'INACTIVE' AND db.log_mode = 'ARCHIVELOG';
              username: '{$ORACLE.USER}'
              password: '{$ORACLE.PASSWORD}'
              description: 'Gets the archive log statistics.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.first()
                  error_handler: DISCARD_VALUE
              tags:
                - tag: component
                  value: archive-log
                - tag: component
                  value: raw
            - uuid: 23b5e8ffd1ef4a08819c0abca0a4a64c
              name: 'Archivelog ''{#DEST_NAME}'': Error'
              type: DEPENDENT
              key: 'oracle.archivelog_error["{#DEST_NAME}"]'
              delay: '0'
              value_type: TEXT
              trends: '0'
              description: 'Displays the error message.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.ERROR
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: archive-log
                - tag: destination
                  value: '{#DEST_NAME}'
            - uuid: 1dedeb66c770466c8222e180f4cdeaa7
              name: 'Archivelog ''{#DEST_NAME}'': Last sequence'
              type: DEPENDENT
              key: 'oracle.archivelog_log_sequence["{#DEST_NAME}"]'
              delay: '0'
              description: 'Identifies the sequence number of the last archived redo log to be archived.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.LOG_SEQUENCE
              master_item:
                key: 'db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: archive-log
                - tag: destination
                  value: '{#DEST_NAME}'
            - uuid: a563942c9c5448e6b8643a7145e3ebf2
              name: 'Archivelog ''{#DEST_NAME}'': Status'
              type: DEPENDENT
              key: 'oracle.archivelog_log_status["{#DEST_NAME}"]'
              delay: '0'
              description: |
                Identifies the current status of the destination where:
                1 - VALID;
                2 - DEFERRED;
                3 - ERROR;
                0 - UNKNOWN.
              valuemap:
                name: 'Oracle Archivelog status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.STATUS
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 1h
              master_item:
                key: 'db.odbc.get[get_archivelog_{#DEST_NAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: archive-log
                - tag: destination
                  value: '{#DEST_NAME}'
              trigger_prototypes:
                - uuid: f2a07c366ad94116b24e246928046013
                  expression: 'last(/Oracle 11g by ODBC/oracle.archivelog_log_status["{#DEST_NAME}"])<2'
                  name: 'Oracle: Archivelog ''{#DEST_NAME}'': Log Archive is not valid'
                  priority: HIGH
                  description: |
                    The trigger will launch if the archive log destination is not in one of these states:
                    2 - DEFERRED;
                    3 - VALID.
                  tags:
                    - tag: scope
                      value: availability
          master_item:
            key: 'db.odbc.get[get_archivelog,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          lld_macro_paths:
            - lld_macro: '{#DEST_NAME}'
              path: $.DEST_NAME
        - uuid: 492e13b6a90e4d25a78c44d69714cd66
          name: 'ASM disk groups discovery'
          type: DEPENDENT
          key: oracle.asm.discovery
          delay: '0'
          description: 'Used for discovering the ASM disk groups.'
          item_prototypes:
            - uuid: 4deb143246844504a5909caedaf18047
              name: 'ASM ''{#DGNAME}'': Get ASM stats'
              type: ODBC
              key: 'db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              history: '0'
              value_type: TEXT
              trends: '0'
              params: |
                SELECT
                name AS dgname,
                ROUND(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)*1024*1024) AS size_byte,
                ROUND(usable_file_mb*1024*1024 ) AS free_size_byte,
                ROUND(100-(usable_file_mb /(total_mb / DECODE(TYPE, 'NORMAL', 2, 'HIGH', 3, 'EXTERN', 1)))* 100, 2) AS used_percent
                FROM v$asm_diskgroup_stat
                WHERE name = '{#DGNAME}';
              username: '{$ORACLE.USER}'
              password: '{$ORACLE.PASSWORD}'
              description: 'Gets the ASM disk group statistics.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.first()
                  error_handler: DISCARD_VALUE
              tags:
                - tag: component
                  value: asm
                - tag: component
                  value: raw
            - uuid: d899ce91ab284a10b80f75f43831d1dd
              name: 'ASM ''{#DGNAME}'': Free size'
              type: DEPENDENT
              key: 'oracle.asm_free_size["{#DGNAME}"]'
              delay: '0'
              units: B
              description: 'The free size of the ASM disk group.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.FREE_SIZE_BYTE
              master_item:
                key: 'db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: asm
                - tag: disk-group
                  value: '{#DGNAME}'
            - uuid: 75e81684c99f486a9c3aae1396f5d1f1
              name: 'ASM ''{#DGNAME}'': Total size'
              type: DEPENDENT
              key: 'oracle.asm_total_size["{#DGNAME}"]'
              delay: '0'
              units: B
              description: 'The total size of the ASM disk group.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.SIZE_BYTE
              master_item:
                key: 'db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: asm
                - tag: disk-group
                  value: '{#DGNAME}'
            - uuid: 3b3805103cc44ae8bdbbd7e6d3e4e867
              name: 'ASM ''{#DGNAME}'': Used size, percent'
              type: DEPENDENT
              key: 'oracle.asm_used_pct["{#DGNAME}"]'
              delay: '0'
              value_type: FLOAT
              units: '%'
              description: 'Usage of the ASM disk group expressed in %.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.USED_PERCENT
              master_item:
                key: 'db.odbc.get[get_asm_{#DGNAME}_stat,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: asm
                - tag: disk-group
                  value: '{#DGNAME}'
              trigger_prototypes:
                - uuid: d1bb38a44df7469ea8fe002a9ab5844f
                  expression: 'min(/Oracle 11g by ODBC/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
                  name: 'Oracle: ASM ''{#DGNAME}'': Disk group usage is too high'
                  event_name: 'Oracle: ASM ''{#DGNAME}'': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.HIGH}% for 5m)'
                  priority: HIGH
                  description: 'The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 1ea08971d48948489deb29e5658b4e86
                  expression: 'min(/Oracle 11g by ODBC/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.WARN}'
                  name: 'Oracle: ASM ''{#DGNAME}'': Disk group usage is too high'
                  event_name: 'Oracle: ASM ''{#DGNAME}'': Disk group usage is too high (over {$ORACLE.ASM.USED.PCT.MAX.WARN}% for 5m)'
                  priority: WARNING
                  description: 'The usage of the ASM disk group expressed in % exceeds `{$ORACLE.ASM.USED.PCT.MAX.WARN}`.'
                  dependencies:
                    - name: 'Oracle: ASM ''{#DGNAME}'': Disk group usage is too high'
                      expression: 'min(/Oracle 11g by ODBC/oracle.asm_used_pct["{#DGNAME}"],5m)>{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
                  tags:
                    - tag: scope
                      value: capacity
          graph_prototypes:
            - uuid: 6ec5d3887a3945999995c7de0ee9b06d
              name: 'ASM ''{#DGNAME}'': ASM disk group ''{#DGNAME}'''
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Oracle 11g by ODBC'
                    key: 'oracle.asm_free_size["{#DGNAME}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Oracle 11g by ODBC'
                    key: 'oracle.asm_total_size["{#DGNAME}"]'
          master_item:
            key: 'db.odbc.get[get_asm,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          lld_macro_paths:
            - lld_macro: '{#DGNAME}'
              path: $.DGNAME
        - uuid: 572defcdbb42425d9bac8a84ac87d6b6
          name: 'Database discovery'
          type: DEPENDENT
          key: oracle.db.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.MATCHES}'
                formulaid: A
              - macro: '{#DBNAME}'
                value: '{$ORACLE.DBNAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
          description: 'Used for database discovery.'
          item_prototypes:
            - uuid: a2497b05cee54bf68e05ef4a3200d24c
              name: 'Database ''{#DBNAME}'': Get CDB and No-CDB info'
              type: ODBC
              key: 'db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              history: 1d
              value_type: TEXT
              trends: '0'
              params: |
                SELECT name as DBNAME,
                DECODE(open_mode, 'MOUNTED', 1, 'READ ONLY', 2, 'READ WRITE', 3, 'READ ONLY WITH APPLY', 4, 'MIGRATE', 5, 0) AS open_mode,
                DECODE(database_role, 'SNAPSHOT STANDBY', 1, 'LOGICAL STANDBY', 2, 'PHYSICAL STANDBY', 3, 'PRIMARY', 4, 'FAR SYNC', 5, 0) AS ROLE,
                DECODE(force_logging, 'YES',1,'NO',0,0) AS force_logging,
                DECODE(log_mode, 'MANUAL',2 ,'ARCHIVELOG',1,'NOARCHIVELOG',0,0) AS log_mode
                FROM v$database
                WHERE name = '{#DBNAME}';
              username: '{$ORACLE.USER}'
              password: '{$ORACLE.PASSWORD}'
              description: 'Gets the information about the CDB and non-CDB database on an instance.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.first()
                  error_handler: DISCARD_VALUE
              tags:
                - tag: component
                  value: cdb
                - tag: component
                  value: raw
            - uuid: 8bfccd1b5de3495aaa98019797e7f4bd
              name: 'Database ''{#DBNAME}'': Force logging'
              type: DEPENDENT
              key: 'oracle.db_force_logging["{#DBNAME}"]'
              delay: '0'
              description: 'Indicates whether the database is under force logging mode (`YES`/`NO`).'
              valuemap:
                name: 'Oracle force log status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.FORCE_LOGGING
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: database
                - tag: database
                  value: '{#DBNAME}'
                - tag: type
                  value: '{#TYPE}'
            - uuid: 789a40a9c3da415db7c8132326418b5c
              name: 'Database ''{#DBNAME}'': Log mode'
              type: DEPENDENT
              key: 'oracle.db_log_mode["{#DBNAME}"]'
              delay: '0'
              description: |
                The archive log mode where:
                0 - NOARCHIVELOG;
                1 - ARCHIVELOG;
                2 - MANUAL.
              valuemap:
                name: 'Oracle log mode'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.LOG_MODE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: database
                - tag: database
                  value: '{#DBNAME}'
                - tag: type
                  value: '{#TYPE}'
            - uuid: 6ed5c01e7db9428cb9b1d584f7b69cc8
              name: 'Database ''{#DBNAME}'': Open status'
              type: DEPENDENT
              key: 'oracle.db_open_mode["{#DBNAME}"]'
              delay: '0'
              description: |
                1 - MOUNTED;
                2 - READ WRITE;
                3 - READ ONLY;
                4 - READ ONLY WITH APPLY (a physical standby database is open in real-time query mode).
              valuemap:
                name: 'Oracle DB open status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.OPEN_MODE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: database
                - tag: database
                  value: '{#DBNAME}'
                - tag: type
                  value: '{#TYPE}'
              trigger_prototypes:
                - uuid: f6ebd56220624792b3d4cca4a2483004
                  expression: 'last(/Oracle 11g by ODBC/oracle.db_open_mode["{#DBNAME}"],#1)<>last(/Oracle 11g by ODBC/oracle.db_open_mode["{#DBNAME}"],#2)'
                  name: 'Oracle: Database ''{#DBNAME}'': Open status has changed'
                  event_name: 'Oracle: Database ''{#DBNAME}'': Open status has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: 'The Oracle Database open status has changed. Acknowledge to close the problem manually.'
                  manual_close: 'YES'
                  dependencies:
                    - name: 'Oracle: Database ''{#DBNAME}'': Open status in mount mode'
                      expression: 'last(/Oracle 11g by ODBC/oracle.db_open_mode["{#DBNAME}"])=1'
                  tags:
                    - tag: scope
                      value: notice
                - uuid: dac78c3690a94676a30ad9002d91b8cf
                  expression: 'last(/Oracle 11g by ODBC/oracle.db_open_mode["{#DBNAME}"])=1'
                  name: 'Oracle: Database ''{#DBNAME}'': Open status in mount mode'
                  priority: WARNING
                  description: 'The Oracle Database is in a mounted state.'
                  tags:
                    - tag: scope
                      value: notice
            - uuid: 65836b97f8f8492a92f957f486cb3f99
              name: 'Database ''{#DBNAME}'': Role'
              type: DEPENDENT
              key: 'oracle.db_role["{#DBNAME}"]'
              delay: '0'
              description: |
                The current role of the database where:
                1 - SNAPSHOT STANDBY;
                2 - LOGICAL STANDBY;
                3 - PHYSICAL STANDBY;
                4 - PRIMARY;
                5 - FAR SYNC.
              valuemap:
                name: 'Oracle DB role'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.ROLE
                - type: DISCARD_UNCHANGED_HEARTBEAT
                  parameters:
                    - 15m
              master_item:
                key: 'db.odbc.get[get_cdb_{#DBNAME}_info,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: database
                - tag: database
                  value: '{#DBNAME}'
                - tag: type
                  value: '{#TYPE}'
              trigger_prototypes:
                - uuid: 4ad8bdb8fb6148a3ac7537deb0b2303c
                  expression: 'last(/Oracle 11g by ODBC/oracle.db_role["{#DBNAME}"],#1)<>last(/Oracle 11g by ODBC/oracle.db_role["{#DBNAME}"],#2)'
                  name: 'Oracle: Database ''{#DBNAME}'': Role has changed'
                  event_name: 'Oracle: Database ''{#DBNAME}'': Role has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: 'The Oracle Database role has changed. Acknowledge to close the problem manually.'
                  manual_close: 'YES'
                  tags:
                    - tag: scope
                      value: notice
          trigger_prototypes:
            - uuid: c3d795cb49514e48806fdaa29a6f6883
              expression: 'last(/Oracle 11g by ODBC/oracle.db_force_logging["{#DBNAME}"]) = 0 and last(/Oracle 11g by ODBC/oracle.db_log_mode["{#DBNAME}"]) = 1'
              name: 'Oracle: Database ''{#DBNAME}'': Force logging is deactivated for DB with active Archivelog'
              priority: WARNING
              description: 'Force logging mode is a very important metric for databases in `ARCHIVELOG`. This feature allows to forcibly write all the transactions to the redo log.'
              tags:
                - tag: scope
                  value: performance
          master_item:
            key: 'db.odbc.get[get_db,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          lld_macro_paths:
            - lld_macro: '{#DBNAME}'
              path: $.DBNAME
            - lld_macro: '{#TYPE}'
              path: $.TYPE
        - uuid: 9f5c33f405a646c2b03880acd00ae262
          name: 'Tablespace discovery'
          type: DEPENDENT
          key: oracle.tablespace.discovery
          delay: '0'
          filter:
            evaltype: AND
            conditions:
              - macro: '{#CON_NAME}'
                value: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
                formulaid: A
              - macro: '{#CON_NAME}'
                value: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: B
              - macro: '{#TABLESPACE}'
                value: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
                formulaid: C
              - macro: '{#TABLESPACE}'
                value: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
                operator: NOT_MATCHES_REGEX
                formulaid: D
          description: 'Used for the discovery of tablespaces in DBMS.'
          item_prototypes:
            - uuid: 82e7c51d53324e9d84638fadb8a43d6c
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Get tablespaces stats'
              type: ODBC
              key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              history: '0'
              value_type: TEXT
              trends: '0'
              params: |
                SELECT
                    'DB' AS CON_NAME,
                    df.TABLESPACE_NAME AS TABLESPACE,
                    df.CONTENTS AS TYPE,
                    NVL(SUM(df.BYTES), 0) AS FILE_BYTES,
                    NVL(SUM(df.MAX_BYTES), 0) AS MAX_BYTES,
                    NVL(SUM(f.FREE), 0) AS FREE_BYTES,
                    NVL(SUM(df.BYTES) - SUM(f.FREE), 0) AS USED_BYTES,
                    ROUND(CASE SUM(df.MAX_BYTES) WHEN 0 THEN 0 ELSE (SUM(df.BYTES) / SUM(df.MAX_BYTES) * 100) END, 2) AS USED_PCT_MAX,
                    ROUND(CASE SUM(df.BYTES) WHEN 0 THEN 0 ELSE (NVL(SUM(df.BYTES) - SUM(f.FREE), 0)) / SUM(df.BYTES) * 100 END, 2) AS USED_FILE_PCT,
                    ROUND(CASE SUM(df.MAX_BYTES) WHEN 0 THEN 0 ELSE NVL(SUM(df.BYTES) - SUM(f.FREE), 0) / SUM(df.MAX_BYTES) * 100 END, 2) AS USED_FROM_MAX_PCT,
                    CASE df.STATUS WHEN 'ONLINE' THEN 1 WHEN 'OFFLINE' THEN 2 WHEN 'READ ONLY' THEN 3 ELSE 0 END AS STATUS
                FROM (SELECT t.CONTENTS,
                             t.STATUS,
                             cdf.FILE_ID,
                             cdf.TABLESPACE_NAME,
                             TRUNC(cdf.BYTES) AS BYTES,
                             TRUNC(GREATEST(cdf.BYTES, cdf.MAXBYTES)) AS MAX_BYTES
                      FROM DBA_DATA_FILES cdf,
                           DBA_TABLESPACES t
                      WHERE cdf.TABLESPACE_NAME = t.TABLESPACE_NAME
                        AND cdf.TABLESPACE_NAME != 'DWH'
                        AND t.CONTENTS = 'PERMANENT') df,
                     (SELECT TRUNC(SUM(BYTES)) AS FREE,
                             TABLESPACE_NAME
                      FROM DBA_FREE_SPACE
                      GROUP BY TABLESPACE_NAME) f
                WHERE df.TABLESPACE_NAME = f.TABLESPACE_NAME (+)
                GROUP BY df.TABLESPACE_NAME,
                         df.CONTENTS,
                         df.STATUS
                UNION ALL
                SELECT
                    'DB' AS CON_NAME,
                    Y.NAME AS TABLESPACE,
                    Y.CONTENTS AS TYPE,
                    NVL(SUM(Y.BYTES), 0) AS FILE_BYTES,
                    NVL(SUM(Y.MAX_BYTES), 0) AS MAX_BYTES,
                    NVL(MAX(NVL(Y.FREE_BYTES, 0)), 0) AS FREE_BYTES,
                    NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0) AS USED_BYTES,
                    ROUND(CASE SUM(Y.MAX_BYTES) WHEN 0 THEN 0 ELSE (SUM(Y.BYTES) / SUM(Y.MAX_BYTES) * 100) END, 2) AS USED_PCT_MAX,
                    ROUND(CASE SUM(Y.BYTES) WHEN 0 THEN 0 ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.BYTES) * 100 END, 2) AS USED_FILE_PCT,
                    ROUND(CASE SUM(Y.MAX_BYTES) WHEN 0 THEN 0 ELSE (NVL(SUM(Y.BYTES) - MAX(Y.FREE_BYTES), 0)) / SUM(Y.MAX_BYTES) * 100 END, 2) AS USED_FROM_MAX_PCT,
                    CASE Y.STATUS WHEN 'ONLINE' THEN 1 WHEN 'OFFLINE' THEN 2 WHEN 'READ ONLY' THEN 3 ELSE 0 END AS STATUS
                FROM (SELECT t.CONTENTS,
                             ctf.TABLESPACE_NAME AS NAME,
                             t.STATUS AS STATUS,
                             ctf.BYTES AS BYTES,
                             (SELECT ((f.TOTAL_BLOCKS - s.TOT_USED_BLOCKS) * vp.VALUE)
                              FROM (SELECT TABLESPACE_NAME,
                                           SUM(USED_BLOCKS) TOT_USED_BLOCKS
                                    FROM V$SORT_SEGMENT
                                    WHERE TABLESPACE_NAME != 'DUMMY'
                                    GROUP BY TABLESPACE_NAME) s,
                                   (SELECT TABLESPACE_NAME,
                                           SUM(BLOCKS) TOTAL_BLOCKS
                                    FROM DBA_TEMP_FILES
                                    WHERE TABLESPACE_NAME != 'DUMMY'
                                    GROUP BY TABLESPACE_NAME) f,
                                   (SELECT VALUE FROM V$PARAMETER WHERE NAME = 'db_block_size') vp
                              WHERE f.TABLESPACE_NAME = s.TABLESPACE_NAME
                                AND f.TABLESPACE_NAME = ctf.TABLESPACE_NAME
                             ) AS FREE_BYTES,
                             CASE WHEN ctf.MAXBYTES = 0 THEN ctf.BYTES ELSE ctf.MAXBYTES END AS MAX_BYTES
                      FROM DBA_TEMP_FILES ctf,
                           DBA_TABLESPACES t
                      WHERE ctf.TABLESPACE_NAME = t.TABLESPACE_NAME
                        AND ctf.TABLESPACE_NAME != 'DWH'
                        AND t.CONTENTS = 'TEMPORARY') Y
                GROUP BY Y.NAME,
                         Y.CONTENTS,
                         Y.STATUS
              username: '{$ORACLE.USER}'
              password: '{$ORACLE.PASSWORD}'
              description: 'Gets the statistics of the tablespace.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.first()
                  error_handler: DISCARD_VALUE
              tags:
                - tag: component
                  value: raw
                - tag: component
                  value: tablespaces
            - uuid: 075a7a72330f41248b49ab062993c3a8
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace allocated, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_alloc_bytes["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              units: B
              description: 'Currently allocated bytes for the tablespace (sum of the current size of datafiles).'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.FILE_BYTES
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
            - uuid: e555bdb465724abdbb501adf98183691
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace free, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_free_bytes["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              units: B
              description: 'Free bytes of the allocated space.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.FREE_BYTES
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
            - uuid: 22d32d3014b44ec6b50a0c4ad684cc3e
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace MAX size, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_max_bytes["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              units: B
              description: 'The maximum size of the tablespace.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.MAX_BYTES
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
            - uuid: 299b4f334f0d4edebba5bc402ba84dd2
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Open status'
              type: DEPENDENT
              key: 'oracle.tbs_status["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              description: |
                The tablespace status where:
                1 - ONLINE;
                2 - OFFLINE;
                3 - READ ONLY.
              valuemap:
                name: 'Oracle tablespace status'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.STATUS
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
              trigger_prototypes:
                - uuid: bf1dff84dcf54d74b775d088e0c2c9e5
                  expression: 'last(/Oracle 11g by ODBC/oracle.tbs_status["{#CON_ID}","{#TABLESPACE}"])=2'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace is OFFLINE'
                  priority: WARNING
                  description: 'The tablespace is in the offline state.'
                  tags:
                    - tag: scope
                      value: availability
                - uuid: 63a057a4756647408b487b8f523128a1
                  expression: 'last(/Oracle 11g by ODBC/oracle.tbs_status["{#CON_ID}","{#TABLESPACE}"],#1)<>last(/Oracle 11g by ODBC/oracle.tbs_status["{#CON_ID}","{#TABLESPACE}"],#2)'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace status has changed'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace status has changed (new value received: {ITEM.VALUE})'
                  priority: INFO
                  description: 'Oracle tablespace status has changed. Acknowledge to close the problem manually.'
                  manual_close: 'YES'
                  dependencies:
                    - name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace is OFFLINE'
                      expression: 'last(/Oracle 11g by ODBC/oracle.tbs_status["{#CON_ID}","{#TABLESPACE}"])=2'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: 91d884a6897c4d258e784aa31af81b5c
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace used, bytes'
              type: DEPENDENT
              key: 'oracle.tbs_used_bytes["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              units: B
              description: 'Currently used bytes for the tablespace (current size of datafiles minus the free space).'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.USED_BYTES
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
            - uuid: 57b78ee1effa4251a727f2b6bd4c883a
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage, percent'
              type: DEPENDENT
              key: 'oracle.tbs_used_file_pct["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              value_type: FLOAT
              units: '%'
              description: 'Used bytes/allocated bytes*100.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.USED_FILE_PCT
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
              trigger_prototypes:
                - uuid: e1ef118f579a4843ab4533e3776897e6
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_file_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage is too high (over {$ORACLE.TBS.USED.PCT.MAX.HIGH}% for 5m).'
                  priority: HIGH
                  description: 'The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.HIGH}`%'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 5e0d014c910a47fbb3760ef9d8ca9fae
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_file_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.WARN}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage is too high (over {$ORACLE.TBS.USED.PCT.MAX.WARN}% for 5m).'
                  priority: WARNING
                  description: 'The usage of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.USED.PCT.MAX.WARN}`%'
                  dependencies:
                    - name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage is too high'
                      expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_file_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: cd9f86fc92ee48d4a41420201f9366bb
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX, percent'
              type: DEPENDENT
              key: 'oracle.tbs_used_from_max_pct["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              value_type: FLOAT
              units: '%'
              description: 'Used bytes/max bytes*100.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.USED_FROM_MAX_PCT
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
              trigger_prototypes:
                - uuid: 2aba0b903ec5420787c5eaebd24325b5
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_from_max_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}% for 5m).'
                  priority: HIGH
                  description: 'The usage of the tablespace `{#TABLESPACE}` from MAX exceeds `{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}`%'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 0a03e40fc66f49fda79be5e9b9e5785f
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_from_max_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX is too high (over {$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}% for 5m).'
                  priority: WARNING
                  description: 'The usage of the tablespace `{#TABLESPACE}` from MAX exceeds `{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}`%'
                  dependencies:
                    - name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace usage from MAX is too high'
                      expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_from_max_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}'
                  tags:
                    - tag: scope
                      value: capacity
            - uuid: 207ea3d7a72f4937a2442805c8205bda
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace allocated, percent'
              type: DEPENDENT
              key: 'oracle.tbs_used_pct["{#CON_ID}","{#TABLESPACE}"]'
              delay: '0'
              value_type: FLOAT
              units: '%'
              description: 'Allocated bytes/max bytes*100.'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - $.USED_PCT_MAX
              master_item:
                key: 'db.odbc.get[get_{#CON_ID}_tablespace_{#TABLESPACE}_stats,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
              tags:
                - tag: component
                  value: tablespaces
                - tag: contents
                  value: '{#CONTENTS}'
                - tag: database
                  value: '{#CON_NAME}'
                - tag: tablespace
                  value: '{#TABLESPACE}'
              trigger_prototypes:
                - uuid: 0bbda9ab5b284a82a6d9d3a90536c280
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace utilization is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace utilization is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.HIGH}% for 5m).'
                  priority: HIGH
                  description: 'The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}`%'
                  tags:
                    - tag: scope
                      value: capacity
                - uuid: 7dabda1107aa42faac567bb6979cf797
                  expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.WARN}'
                  name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace utilization is too high'
                  event_name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace utilization is too high (over {$ORACLE.TBS.UTIL.PCT.MAX.WARN}% for 5m).'
                  priority: WARNING
                  description: 'The utilization of the tablespace `{#TABLESPACE}` exceeds `{$ORACLE.TBS.UTIL.PCT.MAX.WARN}`%'
                  dependencies:
                    - name: 'Oracle: ''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace utilization is too high'
                      expression: 'min(/Oracle 11g by ODBC/oracle.tbs_used_pct["{#CON_ID}","{#TABLESPACE}"],5m)>{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}'
                  tags:
                    - tag: scope
                      value: capacity
          graph_prototypes:
            - uuid: fe549e32ed5b45e7bd68aa39dd663ba8
              name: '''{#CON_NAME}'' TBS ''{#TABLESPACE}'': Tablespace ''{#TABLESPACE}'''
              graph_items:
                - color: 199C0D
                  item:
                    host: 'Oracle 11g by ODBC'
                    key: 'oracle.tbs_alloc_bytes["{#CON_ID}","{#TABLESPACE}"]'
                - sortorder: '1'
                  color: F63100
                  item:
                    host: 'Oracle 11g by ODBC'
                    key: 'oracle.tbs_max_bytes["{#CON_ID}","{#TABLESPACE}"]'
                - sortorder: '2'
                  color: 00611C
                  item:
                    host: 'Oracle 11g by ODBC'
                    key: 'oracle.tbs_used_bytes["{#CON_ID}","{#TABLESPACE}"]'
          master_item:
            key: 'db.odbc.get[get_tablespace,,"Driver={$ORACLE.DRIVER};DBQ=//{$ORACLE.HOST}:{$ORACLE.PORT}/{$ORACLE.SERVICE};"]'
          lld_macro_paths:
            - lld_macro: '{#CONTENTS}'
              path: $.CONTENTS
            - lld_macro: '{#CON_ID}'
              path: $.CON_ID
            - lld_macro: '{#CON_NAME}'
              path: $.CON_NAME
            - lld_macro: '{#TABLESPACE}'
              path: $.TABLESPACE
      tags:
        - tag: class
          value: database
        - tag: target
          value: oracle
      macros:
        - macro: '{$ORACLE.ASM.USED.PCT.MAX.HIGH}'
          value: '95'
          description: 'The maximum percentage of used space in the Automatic Storage Management (ASM) disk group for the High trigger expression.'
        - macro: '{$ORACLE.ASM.USED.PCT.MAX.WARN}'
          value: '90'
          description: 'The maximum percentage of used space in the Automatic Storage Management (ASM) disk group for the Warning trigger expression.'
        - macro: '{$ORACLE.CONCURRENCY.MAX.WARN}'
          value: '80'
          description: 'The maximum percentage of session concurrency for the Warning trigger expression.'
        - macro: '{$ORACLE.DB.FILE.MAX.WARN}'
          value: '80'
          description: 'The maximum percentage of used database files for the Warning trigger expression.'
        - macro: '{$ORACLE.DBNAME.MATCHES}'
          value: '.*'
          description: 'Used in database discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.DBNAME.NOT_MATCHES}'
          value: PDB\$SEED
          description: 'Used in database discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.DRIVER}'
          value: '<Put path to oracle driver here>'
          description: 'Oracle driver path. For example: `/usr/lib/oracle/21/client64/lib/libsqora.so.21.1`'
        - macro: '{$ORACLE.EXPIRE.PASSWORD.MIN.WARN}'
          value: '7'
          description: 'The number of days before the password expires for the Warning trigger expression.'
        - macro: '{$ORACLE.HOST}'
          value: '<Put oracle host here>'
          description: 'The hostname or IP address of the Oracle DB instance.'
        - macro: '{$ORACLE.PASSWORD}'
          value: '<Put your password here>'
          description: 'Oracle user''s password.'
        - macro: '{$ORACLE.PGA.USE.MAX.WARN}'
          value: '90'
          description: 'Alert threshold for the maximum percentage of the Program Global Area (PGA) usage for the Warning trigger expression.'
        - macro: '{$ORACLE.PORT}'
          value: '1521'
          description: 'Oracle Database TCP port.'
        - macro: '{$ORACLE.PROCESSES.MAX.WARN}'
          value: '80'
          description: 'Alert threshold for the maximum percentage of active processes for the Warning trigger expression.'
        - macro: '{$ORACLE.REDO.MIN.WARN}'
          value: '3'
          description: 'Alert threshold for the minimum number of redo logs for the Warning trigger expression.'
        - macro: '{$ORACLE.SERVICE}'
          value: '<Put oracle service name here>'
          description: 'Oracle Service Name.'
        - macro: '{$ORACLE.SESSION.LOCK.MAX.TIME}'
          value: '600'
          description: 'The maximum duration of the session lock in seconds to count the session as a prolongedly locked query.'
        - macro: '{$ORACLE.SESSION.LONG.LOCK.MAX.WARN}'
          value: '3'
          description: 'Alert threshold for the maximum number of the prolongedly locked sessions for the Warning trigger expression.'
        - macro: '{$ORACLE.SESSIONS.LOCK.MAX.WARN}'
          value: '20'
          description: 'Alert threshold for the maximum percentage of locked sessions for the Warning trigger expression.'
        - macro: '{$ORACLE.SESSIONS.MAX.WARN}'
          value: '80'
          description: 'Alert threshold for the maximum percentage of active sessions for the Warning trigger expression.'
        - macro: '{$ORACLE.SHARED.FREE.MIN.WARN}'
          value: '5'
          description: 'Alert threshold for the minimum percentage of free shared pool for the Warning trigger expression.'
        - macro: '{$ORACLE.TABLESPACE.CONTAINER.MATCHES}'
          value: '.*'
          description: 'Used in tablespace discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.TABLESPACE.CONTAINER.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Used in tablespace discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.TABLESPACE.NAME.MATCHES}'
          value: '.*'
          description: 'Used in tablespace discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.TABLESPACE.NAME.NOT_MATCHES}'
          value: CHANGE_IF_NEEDED
          description: 'Used in tablespace discovery. It can be overridden on the host or linked template level.'
        - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.HIGH}'
          value: '95'
          description: 'High severity alert threshold for the maximum percentage of tablespace usage (used bytes/max bytes) for the High trigger expression.'
        - macro: '{$ORACLE.TBS.USED.PCT.FROM.MAX.WARN}'
          value: '90'
          description: 'Warning severity alert threshold for the maximum percentage of tablespace usage from maximum tablespace size (used bytes/max bytes) for the Warning trigger expression.'
        - macro: '{$ORACLE.TBS.USED.PCT.MAX.HIGH}'
          value: '95'
          description: 'High severity alert threshold for the maximum percentage of tablespace usage (used bytes/allocated bytes) for the High trigger expression.'
        - macro: '{$ORACLE.TBS.USED.PCT.MAX.WARN}'
          value: '90'
          description: 'Warning severity alert threshold for the maximum percentage of tablespace usage (used bytes/allocated bytes) for the Warning trigger expression.'
        - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.HIGH}'
          value: '90'
          description: 'High severity alert threshold for the maximum percentage of tablespace utilization (allocated bytes/max bytes) for the High trigger expression.'
        - macro: '{$ORACLE.TBS.UTIL.PCT.MAX.WARN}'
          value: '80'
          description: 'Warning severity alert threshold for the maximum percentage of tablespace utilization (allocated bytes/max bytes) for the High trigger expression.'
        - macro: '{$ORACLE.USER}'
          value: '<Put your username here>'
          description: 'Oracle username.'
      dashboards:
        - uuid: 2eb5202dbe33439b99a9c3e8923e54c8
          name: 'Oracle Performance'
          pages:
            - widgets:
                - type: graph
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Cache Hit Ratios'
                    - type: STRING
                      name: reference
                      value: AAAAA
                - type: graph
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Physical Read\Write Rate'
                    - type: STRING
                      name: reference
                      value: AAAAC
                - type: graph
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Datafiles'
                    - type: STRING
                      name: reference
                      value: AAAAE
                - type: graph
                  'y': '15'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Processes'
                    - type: STRING
                      name: reference
                      value: AAAAG
                - type: graph
                  'y': '20'
                  width: '72'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: SGA Memory Usage'
                    - type: STRING
                      name: reference
                      value: AAAAI
                - type: graph
                  x: '36'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Sort Operations'
                    - type: STRING
                      name: reference
                      value: AAAAB
                - type: graph
                  x: '36'
                  'y': '5'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Physical Read\Write Rate, Bytes'
                    - type: STRING
                      name: reference
                      value: AAAAD
                - type: graph
                  x: '36'
                  'y': '10'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: PGA'
                    - type: STRING
                      name: reference
                      value: AAAAF
                - type: graph
                  x: '36'
                  'y': '15'
                  width: '36'
                  height: '5'
                  fields:
                    - type: GRAPH
                      name: graphid.0
                      value:
                        host: 'Oracle 11g by ODBC'
                        name: 'Oracle: Sessions'
                    - type: STRING
                      name: reference
                      value: AAAAH
      valuemaps:
        - uuid: aeed6a04aba4486293cf0061f076a6a7
          name: 'Oracle Archivelog status'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Error
            - value: '2'
              newvalue: Deferred
            - value: '3'
              newvalue: Valid
        - uuid: 230a4382d6cb4e598239a0b7ed6602b4
          name: 'Oracle archiver state'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Stopped
            - value: '2'
              newvalue: Started
            - value: '3'
              newvalue: Failed
        - uuid: fe657e9f1abd45c8b9c2be165b00ca4b
          name: 'Oracle DB open status'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Mounted
            - value: '2'
              newvalue: 'Read Only'
            - value: '3'
              newvalue: Read-Write
            - value: '4'
              newvalue: 'Read Only with Apply'
        - uuid: 0e1d8fcc8f064e6e9d466f9266ea9b6b
          name: 'Oracle DB role'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: 'Snapshot standby'
            - value: '2'
              newvalue: 'Logical standby'
            - value: '3'
              newvalue: 'Physical standby'
            - value: '4'
              newvalue: Primary
            - value: '5'
              newvalue: 'Far sync'
        - uuid: 950397eb1a16416b8c3003c594480d1b
          name: 'Oracle force log status'
          mappings:
            - value: '0'
              newvalue: 'No'
            - value: '1'
              newvalue: 'Yes'
        - uuid: e907913569c84946984400b810d075e1
          name: 'Oracle instance role'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Primary
            - value: '2'
              newvalue: Secondary
        - uuid: cb1c339f98b64670b2853c377e38f821
          name: 'Oracle instance status'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Started
            - value: '2'
              newvalue: Mounted
            - value: '3'
              newvalue: Open
            - value: '4'
              newvalue: 'Open migrate'
        - uuid: 354ee12919ae403e8301494b2cc4e754
          name: 'Oracle log mode'
          mappings:
            - value: '0'
              newvalue: NOARCHIVELOG
            - value: '1'
              newvalue: ARCHIVELOG
            - value: '2'
              newvalue: MANUAL
        - uuid: fda6e54cb3d74863879ae0ee326ef8f6
          name: 'Oracle tablespace status'
          mappings:
            - value: '0'
              newvalue: Unknown
            - value: '1'
              newvalue: Online
            - value: '2'
              newvalue: Offline
            - value: '3'
              newvalue: Read-Only
        - uuid: 42e5c143323e499d96777860c2513a01
          name: 'Service state'
          mappings:
            - value: '0'
              newvalue: Down
            - value: '1'
              newvalue: Up
  triggers:
    - uuid: 6ef4fff85b954f91868e57f199d4a1ff
      expression: 'max(/Oracle 11g by ODBC/net.tcp.service[tcp,{$ORACLE.HOST},{$ORACLE.PORT}],#3)=0  and max(/Oracle 11g by ODBC/proc.num[,,,"tnslsnr LISTENER"],#3)>0'
      name: 'Oracle: Port {$ORACLE.PORT} is unavailable'
      priority: DISASTER
      description: 'The TCP port of the Oracle Server service is currently unavailable.'
      tags:
        - tag: scope
          value: availability
    - uuid: 97ae4f2b856e43bd82ade6f62cee9252
      expression: 'min(/Oracle 11g by ODBC/oracle.processes_count,5m) * 100 / last(/Oracle 11g by ODBC/oracle.processes_limit) > {$ORACLE.PROCESSES.MAX.WARN}'
      name: 'Oracle: Too many active processes'
      event_name: 'Oracle: Too many active processes (over {$ORACLE.PROCESSES.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: 'Active processes are using more than `{$ORACLE.PROCESSES.MAX.WARN}`% of the available number of processes.'
      tags:
        - tag: scope
          value: capacity
    - uuid: 8f05db8887af4fcd8947c50a226d4cbc
      expression: 'min(/Oracle 11g by ODBC/oracle.session_count,5m) * 100 / last(/Oracle 11g by ODBC/oracle.session_limit) > {$ORACLE.SESSIONS.MAX.WARN}'
      name: 'Oracle: Too many active sessions'
      event_name: 'Oracle: Too many active sessions (over {$ORACLE.SESSIONS.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: 'Active sessions are using more than `{$ORACLE.SESSIONS.MAX.WARN}`% of the available sessions.'
      tags:
        - tag: scope
          value: capacity
    - uuid: a103735fb6e1470381a352713c0e2a03
      expression: 'min(/Oracle 11g by ODBC/oracle.db_files_count,5m) * 100 / last(/Oracle 11g by ODBC/oracle.db_files_limit) > {$ORACLE.DB.FILE.MAX.WARN}'
      name: 'Oracle: Too many database files'
      event_name: 'Oracle: Too many database files (over {$ORACLE.DB.FILE.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: 'The number of datafiles is higher than `{$ORACLE.DB.FILE.MAX.WARN}`% of the available datafile limit.'
      tags:
        - tag: scope
          value: capacity
    - uuid: 24907341e02741ff9b14334ff18b4571
      expression: 'min(/Oracle 11g by ODBC/oracle.total_pga_used,5m) * 100 / last(/Oracle 11g by ODBC/oracle.pga_target) > {$ORACLE.PGA.USE.MAX.WARN}'
      name: 'Oracle: Total PGA inuse is too high'
      event_name: 'Oracle: Total PGA inuse is too high (over {$ORACLE.PGA.USE.MAX.WARN}% for 5 min)'
      priority: WARNING
      description: 'The total PGA currently consumed by work areas is more than `{$ORACLE.PGA.USE.MAX.WARN}`% of `PGA_AGGREGATE_TARGET`.'
      tags:
        - tag: scope
          value: capacity
  graphs:
    - uuid: bdbe50e0dd8248e4bd5e4e9f53c899ff
      name: 'Oracle: Cache Hit Ratios'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.buffer_cache_hit_ratio
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.library_cache_hit_ratio
    - uuid: 7182ee65dada4f4dbfe80a51a4ee67a8
      name: 'Oracle: Datafiles'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.db_files_count
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.db_files_limit
    - uuid: 7569fa8f51704a86aadb8091683c9230
      name: 'Oracle: PGA'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.total_pga_used
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.pga_target
        - sortorder: '2'
          color: 00611C
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.total_pga_allocated
    - uuid: e7c43ff814e04ef39735b05a0535ece0
      name: 'Oracle: Physical Read\Write Rate'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.physical_writes_rate
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.physical_reads_rate
    - uuid: a18f04f42ad448a48bc1a8b9beb545a6
      name: 'Oracle: Physical Read\Write Rate, Bytes'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.physical_write_bytes_rate
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.physical_read_bytes_rate
    - uuid: af7fc61d51a04e73bb918cedcd6b90bf
      name: 'Oracle: Processes'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.processes_count
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.processes_limit
    - uuid: f933b24c58f04bd08927404fff7b9cf9
      name: 'Oracle: Sessions'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.session_count
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.session_active_background
        - sortorder: '2'
          color: 00611C
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.session_inactive_user
        - sortorder: '3'
          color: F7941D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.session_active_user
        - sortorder: '4'
          color: FC6EA3
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.session_limit
    - uuid: 86d9188f7ae04ba4a8509c93c5f41038
      name: 'Oracle: SGA Memory Usage'
      type: STACKED
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_java_pool
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_large_pool
        - sortorder: '2'
          color: 00611C
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_shared_pool
        - sortorder: '3'
          color: F7941D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_log_buffer
        - sortorder: '4'
          color: FC6EA3
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_fixed
        - sortorder: '5'
          color: 6C59DC
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.sga_buffer_cache
    - uuid: 0f78f9cd82b245478e45792177de3724
      name: 'Oracle: Sort Operations'
      graph_items:
        - color: 199C0D
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.memory_sorts_ratio
        - sortorder: '1'
          color: F63100
          item:
            host: 'Oracle 11g by ODBC'
            key: oracle.disk_sorts
